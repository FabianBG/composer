<div class="data-import-details">
  <div ng-show="detailsLoading" class="text-center"><i class="fa fa-spinner fa-spin"></i> Loading...<br/><br/>(Large datasets may take some time to import.)</div>
  <div ng-show="noImportData" class="text-center"><i class="fa fa-warning"></i> No data to import from this database.<br/><br/>Store will not be added.</div>
  <div ng-if="import.preimport.length > 0">
    <div style="display: inline-block; width: 100%;">
      <div class="pull-left">
        <h3>Available Layers</h3>
        <p>
          Please specify which dataset{{import.preimport.length > 1 ? 's' : ''}} to import.
          <br/>(At least 1 layer must be imported for the Store to be added.)
        </p>
      </div>
      <div class="pull-right next-import-button">
        <div ng-if="import.imported.length > 0" class="bg-success imported-msg">
          {{ import.imported.length }}
           {{ import.imported.length > 1 ? 'layers' : 'layer' }} imported.
        </div>
        <button class="btn btn-success btn-sm pull-left" ng-show="import.preimport.length > 0" ng-click="importTables(allSelected)">Import Selected Layers</button>
      </div>
    </div>
    <div ng-grid="preimportGridOpts" class="pending-layers"></div>
    <div class="pending-footnote">* May not contain spatial data.</div>
  </div>
  <div ng-if="import.pending.length > 0">
    <div style="display: inline-block; width: 100%;">
      <div class="pull-left">
        <h3>Pending Layers</h3>
        <p>Please specify the projection for the following layer{{import.pending.length > 1 ? 's' : ''}}.</p>
      </div>
      <div class="pull-right all-import-button">
        <button class="btn btn-success btn-sm pull-left" ng-show="import.pending.length > 0" ng-click="reimport(layerSelections)">Import All Selected</button>
      </div>
    </div>
    <div ng-grid="pendingGridOpts" class="pending-layers"></div>
  </div>
  <div ng-if="import.imported.length > 0">
    <h3>Imported Layer{{import.imported.length > 1 ? 's' : ''}}</h3>
    <p>
      The following layer{{import.imported.length > 1 ? 's have' : ' has'}} been created.
    </p>
    <div ng-grid="completedGridOpts"></div>
  </div>
  <div ng-if="import.failed.length > 0">
    <h3>Failed Layer{{import.failed.length > 1 ? 's' : ''}}</h3>
    <p>
      The following layer{{import.failed.length > 1 ? 's' : ''}} failed to import:
      <ul class="list-unstyled">
        <li ng-repeat="failed in import.failed">{{ failed.file }}</li>
      </ul>
    </p>
  </div>
  <div ng-if="import.ignored.length > 0">
    <h3>Ignored Layer{{import.ignored.length > 1 ? 's' : ''}}</h3>

    <div ng-click="showIgnored = !showIgnored">
      The following {{import.ignored.length}} file{{import.ignored.length > 1 ? 's were' : ' was'}} not recognized: <span class="icon"><i class="fa" ng-class="{ 'fa-chevron-right': !showIgnored, 'fa-chevron-down': showIgnored }"></i></span>
    </div>
    <div class="horizontal-divider" collapse="!showIgnored" ng-init="showIgnored = import.ignored.length < 10">
      <ul class="list-unstyled">
        <li ng-repeat="ignored in import.ignored">{{ ignored.name }}</li>
      </ul>
    </div>
  </div>

  <div class="row map-choice" ng-show="!mapInfo && (import.imported.length > 0 || import.pending.length > 0)">
    <div class="col-sm-12 text-center" ng-show="import.imported.length==0" style="margin-bottom: 15px;">Please import some layers above to add to a map.</div>
    <div class="col-sm-6 text-center">
      <div class="lead">Add selected layer{{map.selected.length > 1 ? 's' : ''}} above<br/>to an existing map: </div>
      <div class="map-picker">
        <ui-select ng-model="map.selected" ng-disabled="disabled" theme="bootstrap" reset-search-input="false" ng-change="setMap(map.selected);">
          <ui-select-match placeholder="Select a map...">
            {{$select.selected.name}}
          </ui-select-match>
          <ui-select-choices repeat="map in maps">
            <span ng-bind-html="map.name | highlight: $select.search"></span>
          </ui-select-choices>
        </ui-select>
      </div>
      <button type="button" class="btn btn-success btn-sm inline map-button" ng-disabled="!selectedMap || import.imported.length==0" ng-click="addSelectedToMap(layerSelections)">Add to Map</button>
    </div>
    <div class="col-sm-6 text-center vertical-divider">
      <span class="pull-left or">OR</span>
      <p class="lead" style="line-height: 3em;">Create a New Map:</p>
      <button class="btn btn-primary btn-sm" ng-disabled="import.imported.length==0" ng-click="createNewMap(layerSelections);">New Map &rarr;</button>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <inline-errors errors="errors"></inline-errors>
    </div>
  </div>
</div>
