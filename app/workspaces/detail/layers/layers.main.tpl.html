<div class="layers-tab-inner">
  <h3>Layers</h3>
  <div class="row">
    <div class="col-sm-4">
      <div class="layers-count">
        <strong>{{ layers.length }}</strong> Layer<span ng-if="maps.length==0 || maps.length>1">s</span> in project <strong>{{ workspace }}</strong>
      </div>
    </div>
    <div class="col-sm-8">
      <div class="add-to-map pull-right">
        <span class="add-label">Add Selected Layers to Map:</span>
        <div class="map-picker">
          <ui-select ng-model="map.selected" ng-disabled="disabled" theme="bootstrap" reset-search-input="false" ng-change="setMap(map.selected);">
            <ui-select-match placeholder="Select a map...">
              {{$select.selected.name}}
            </ui-select-match>
            <ui-select-choices repeat="map in maps">
              <span ng-bind-html="map.name | highlight: $select.search"></span>
            </ui-select-choices>
          </ui-select>
        </div>
        <button type="button" class="btn btn-success btn-sm inline map-button" ng-disabled="!selectedMap" ng-click="addSelectedToMap()">Add</button>
      </div>
    </div>
  </div>
  <div class="layers-summary">
    <div class="row" ng-repeat="row in layers | partition:3">
      <div class="col-sm-4" ng-repeat="layer in row">
        <div class="layer-summary-detail" ng-click="layer.selected = !layer.selected" ng-style="{'outline': layer.selected ? '3px #28728D solid' : ''}">
          <div class="layer-icon">
            <i class='icon-for-layer' ng-class="{'icon-location': layer.geometry=='Point', 'icon-share': layer.geometry=='MultiLineString', 'icon-checkbox-unchecked': layer.geometry=='MultiPolygon', 'icon-delicious': layer.geometry=='raster'}"></i>
          </div>
          <div class="detail">
            <div pop="{{ layer.name }}" pop-show="{{ layer.layerName }}" pop-placement="bottom" ng-click="closeLayerNPopovers(layer);"><strong>{{ layer.name | truncate:false:33:true }}</strong></div>
            <div ng-if="layer.title" pop="{{ layer.title }}" pop-show="{{ layer.layerTitle }}" pop-placement="bottom" ng-click="closeLayerTPopovers(layer);">{{ layer.title | truncate:false:33:true }}</div>
            <div><strong>Modified:</strong> {{ layer.modified.pretty }}</div>
            <!-- <p><a href="" ng-click="newOLWindow(map)">View in OpenLayers</a></p> -->
          </div>
          <div class="layer-settings">
            <a ui-sref="layer.style({workspace: layer.workspace, name: layer.name})">
              <i class="fa fa-paint-brush"></i> Style
            </a>
            <a ng-click="showAttrs(layer.name, layer.schema.attributes)">{{ layer.schema.attributes.length }} Attributes</a>
            <a ng-click="editLayerSettings(layer);"><i class="fa fa-gear"></i> Settings</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div ng-show="layers.length==0">
    <div class="row">
      <div class="col-sm-6">
        <a ng-click="createLayer();">
          <div class="new-layer-box">New Layer
            <div class="plus">+ <i class="icon-stack"></i></div>
          </div>
        </a>
      </div>
    </div>
  </div>
</div>
